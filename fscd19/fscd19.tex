
\documentclass[a4paper,USenglish,cleveref, autoref]{lipics-v2019}
%This is a template for producing LIPIcs articles.
%See lipics-manual.pdf for further information.
%for A4 paper format use option "a4paper", for US-letter use option "letterpaper"
%for british hyphenation rules use option "UKenglish", for american hyphenation rules use option "USenglish"
%for section-numbered lemmas etc., use "numberwithinsect"
%for enabling cleveref support, use "cleveref"
%for enabling cleveref support, use "autoref"

% \usepackage{dsfont} % black-board bold numbers, package doublestroke
% LACKS: \mathds{0}

% Disallowed packages:
% - enumitem
% - paralist
% - natbib
% - wrapfig

% Disallowed:
% - conditional inclusion of content
% - splitting over several files

% LIPICS enumerations
% - itemize
% - enumerate 1.
% - alphaenumerate (a)
% - romanenumerate (i)
% - bracketenumerate (1)

% LIPICS environments
% - lstlisting
% - theorem
% - lemma
% - corollary
% - proposition
% - exercise
% - definition
% - example
% - note and note*
% - remark and remark*
% - claim and claim*
% - proof and claimproof

% Features
% - env: claim and claimproof inside proof

% References to lemmata
% - \cref and \autoref (includes name, like Corollary 3)


%\graphicspath{{./graphics/}}%helpful if your graphic files are in another directory

\input{macros}

\bibliographystyle{plainurl}% the mandatory bibstyle

\title{Normalization by Evaluation for Call-by-Push-Value and Focused Lambda-Calculus}

\titlerunning{NbE for CBPV and Focusing}%optional, please use if title is longer than one line

\author{Andreas Abel}
  {Department of Computer Science and Engineering,
    Chalmers and Gothenburg University,
    Sweden \and
    \url{www.cse.chalmers.se/~abela}
  }
  {andreas.abel@gu.se}
  {https://orcid.org/0000-0003-0420-4492}
  {VR Grant 2014-04864 \emph{Termination
      Certificates for Dependently-Typed Programs and Proofs via
      Refinement Types}
  }
% TODO mandatory, please use full name;
% only 1 author per \author macro;
% first two parameters are mandatory, other parameters can be empty.
% Please provide at least the name of the affiliation and the country.
% The full address is optional

\author{Frederik Folkmar Ramcke}
  {Department of Computer Science and Engineering,
    Chalmers and Gothenburg University,
    Sweden
  }
  {}%email
  {}%orcid
  {}%funding

\authorrunning{A. Abel and F. F. Ramcke}%TODO mandatory. First: Use abbreviated first/middle names. Second (only in severe cases): Use first author plus 'et al.'

\Copyright{Andreas Abel and Frederik F. Ramcke}%TODO mandatory, please use full first names. LIPIcs license is "CC-BY";  http://creativecommons.org/licenses/by/3.0/

\ccsdesc[100]{General and reference~General literature}
\ccsdesc[100]{General and reference}%TODO mandatory: Please choose ACM 2012 classifications from https://dl.acm.org/ccs/ccs_flat.cfm

\keywords{Evaluation, Intuitionistc Propositional Logic,
  Lambda-Calculus, Monad, Normalization,
  Polarized Logic, Semantics}%TODO mandatory; please add comma-separated list of keywords

\category{}%optional, e.g. invited paper

\relatedversion{}%optional, e.g. full version hosted on arXiv, HAL, or other respository/website
%\relatedversion{A full version of the paper is available at \url{...}.}

\supplement{}%optional, e.g. related research data, source code, ... hosted on a repository like zenodo, figshare, GitHub, ...

%\funding{(Optional) general funding statement \dots}%optional, to capture a funding statement, which applies to all authors. Please enter author specific funding statements as fifth argument of the \author macro.

\acknowledgements{ The presentation of this NbE proof and its
Agda formalization benefited greatly from discussions with Christian
Sattler.}%optional

%\nolinenumbers %uncomment to disable line numbering

%\hideLIPIcs  %uncomment to remove references to LIPIcs series (logo, DOI, ...), e.g. when preparing a pre-final version to be uploaded to arXiv or another public repository

%Editor-only macros:: begin (do not touch as author)%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\EventEditors{Jakob Rehof and XXX}
\EventNoEds{2}
\EventLongTitle{Formal Structures for Computation and Deduction}
\EventShortTitle{FSCD 2019}
\EventAcronym{FSCD}
\EventYear{2019}
\EventDate{June 24--30, 2019}
\EventLocation{Dortmund, Germany}
\EventLogo{}
\SeriesVolume{}
\ArticleNo{}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{document}

\maketitle

\begin{abstract}
  We extend normalization by evaluation (NbE) to call-by-push-value
  (CBPV) and focused intutitionistic propositional logic.
  The developments have been partially formalized in Agda.
\end{abstract}


\section{Introduction}
\label{sec:intro}


\nocite{bergerSchwichtenberg:lics91}

\nocite{jungTiuryn:tlca93}

\nocite{altenkirchHofmannStreicher:ctcs95}

\nocite{abel:habil}

\nocite{danvy:popl96}

\nocite{fioreSimpson:tlca99}

\nocite{altenkirchDybjerHofmannScott:lics01}

\nocite{balatDiCosmoFiore:popl04}

\nocite{altenkirchUustalu:flops04}

\nocite{barral:PhD}

\nocite{scherer:popl17}


\section{Normalization by Evaluation for the Simply-Typed Lambda
  Calculus with Sums}
\label{sec:lambda}

In this section, we review the normalization by evaluation (NbE)
argument for the simply-typed lambda calculus with weak sums, setting
the stage for the later sections.
%
We work in a type-theoretic meta-language, with the basic judgement
$t : T$ meaning that object $t$ is an inhabitant of type $T$.
Meta-theoretic types can be thought of as sets, thus, the colon $:$
replaces the standard notion of elementhood $\in$, and we are free to
reuse $\in$ for other purposes.

%\paradot{Contexts and indices}
We adapt a categorical aka de Bruijn style for the abstract syntax of
terms, which we conceive as intrinsically well-typed.  In de Bruijn
style, a context $\Gamma$ is just a snoc list of simple types $A$,
meaning we write context extension as $\cext \Gamma A$, and the empty
context as $\cempty$.  Membership \fbox{$A \in \Gamma$} and sublist
relations \fbox{$\Gamma \sublist \Delta$} are given inductively by the
following rules:
\begin{gather*}
  \nru{\tzero}{}{A \in \cext \Gamma A}
\qquad
  \nru{\tsuc}{A \in \Gamma}{A \in \cext \Gamma B}
\qquad
  \nru{\tdone}{}{\cempty \sublist \cempty}
\qquad
  \nru{\tlift}
    {\Gamma \sublist \Delta}
    {\cext \Gamma A \sublist \cext \Delta A}
\qquad
  \nru{\tweak}
    {\Gamma \sublist \Delta}
    {\Gamma \sublist \cext \Delta A}
\end{gather*}
We consider the rules as introductions of the indexed types
$\_{\in}\_$ and $\_{\sublist}\_$ and the rule names as constructors.
For instance, $\suc \tzero : A \in \cext {\cext \Gamma A} B$ for any
$\Gamma$, $A$, and $B$; and if we read $\tsuc^n\,\tzero$ as unary
number $n$, then $x : A \in \Gamma$ is exactly the (de Bruijn) index
of $A$ in $\Gamma$.

We can define
\fbox{$\tid : \Gamma \sublist \Gamma$} and \fbox{$\_{\comp}\_ : \Gamma
\sublist \Delta \to \Delta \sublist \Phi \to \Gamma \sublist \Phi$}
by recursion, meaning that the (proof-relevant)
sublist relation is reflexive and transitive.
% The sublist relation is reflexive and transitive, the witnesses
% \fbox{$\tid : \Gamma \sublist \Gamma$} and \fbox{$\_{\comp}\_ : \Gamma
% \sublist \Delta \to \Delta \sublist \Phi \to \Gamma \sublist \Phi$}
% have easy recursive definitions.
Thus, lists $\Gamma$ form a category
$\Cxt$ with morphisms $\tau : \Gamma \sublist \Delta$, and the category laws
hold propositionally, e.g., we have $\id \comp \tau \equiv \tau$ in
propositional equality for all morphisms $\tau$.

The category $\Cxt$ allows us to consider $A{\in}\_$ as a presheaf over
$\Cxt\op$ for any $A$, witnessed by \fbox{$\treindex : \Gamma \sublist
  \Delta \to A \in \Gamma \to A \in \Delta$}, which is the morphism
part of functor from $\Cxt$ to $\Set$, mapping object $\Gamma$ to the
set $A \in \Gamma$ of the indices of $A$ in $\Gamma$.

Simple types shall be given by the grammar
\fbox{$S,T ::= P \mid S \To T \mid S \times T \mid \bone \mid S + T
  \mid \bzero$}.
Intrinsically well-typed lambda-terms, in abstract syntax,
are just inhabitants $t$ of the type $A \dashv \Gamma$,
inductively defined by the following rules.
\begin{gather*}
  \nru{\tvar}{A \in \Gamma}{A \dashv \Gamma}
\qquad
  \nru{\tabs}{B \from \cext \Gamma A}{A \To B \from \Gamma}
\qquad
  \nru{\tapp}
    {A \To B \from \Gamma \qquad A \from \Gamma}
    {B \from \Gamma}
\\[2ex]
  \nru{\tunit}{}{\bone \from \Gamma}
\qquad
  \nru{\tpair}
    {A_1 \from \Gamma \qquad A_2 \from \Gamma}
    {A_1 \times A_2 \from \Gamma}
\qquad
  \nru{\tprj_i}
    {A_1 \times A_2 \from \Gamma}
    {A_i \from \Gamma}
\\[2ex]
  \nru{\tinj_i}
    {A_i \from \Gamma}
    {A_1 + A_2 \from \Gamma}
\qquad
  \nru{\tcase}
    {A_1 + A_2 \from \Gamma
      \qquad C \from \cext \Gamma A_1
      \qquad C \from \cext \Gamma A_2
    }{C \from \Gamma}
\qquad
  \nru{\tabort}
    {\bzero \from \Gamma}
    {C \from \Gamma}
\end{gather*}
The skilled eye of the reader will immediately recognize the proof
rules of intuitionistic propositional logic (IPL) under the
Curry-Howard isomorphism.  Terms of type $A$ form a presheaf
$A{\from}\_$ as witnessed by the standard weakening operation%
\footnote{Here, $\tren$ is short for \emph{renaming}, but in a nameless
calculus we should better speak of \emph{reindexing}, which could, a
bit clumsily, also abbreviated to $\tren$.}
\fbox{$\tren : \Gamma \sublist \Delta \to A \from \Gamma \to A \from \Delta$}
defined by recursion over $t : A \from \Gamma$.


\section{Call-By-Push Value}
\label{sec:cbpv}

\section{Focused Intuitionistic Propositional Logic}
\label{sec:fipl}

\section{Conclusion}
\label{sec:concl}

\bibliography{auto-fscd19}

% \appendix

\end{document}
